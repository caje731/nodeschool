var http = require('http');
var bl	 = require('bl');

var url1 = process.argv[2];
var url2 = process.argv[3];
var url3 = process.argv[4];

var completion_tracker = new Array();

var process_response = function(key, response){
	response.setEncoding('utf-8');
	response.pipe(bl(function(err, data){
		if(err){
			return enqueue(key, err.toString());
		}
		return enqueue(key, data.toString());
	}));
};

var enqueue = function(key, string){
	completion_tracker[key] = string;
	var temp = completion_tracker.filter(function(element){
		return null!=element && undefined!=element;
	});
	if(temp.length==3){
		completion_tracker.forEach(function(element){
			console.log(element);
		});
	};
};
http.get(url1, function(response){process_response(0, response)});
http.get(url2, function(response){process_response(1, response)});
http.get(url3, function(response){process_response(2, response)});